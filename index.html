<!DOCTYPE html>
<html>
<head>
    <title>SSP-Screensaver</title>
    <style>
        body {
            background-color: black;
            color: white;
        }
        .emoji {
            position: absolute;
            font-size: 24px;
        }
         #form-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        #form-container.hidden {
            display: none;
        }
    </style>
</head>
<body>
 <div id="form-container">
     <label for="emoji-count">Anzahl der Emojis:</label>
     <input type="number" id="emoji-count" value="50">
     <button id="start">Start</button>
  </div>
    <div id="emojis"></div>
    <button id="reset">Reset</button>

    <script>

        const emojiCountInput = document.querySelector('#emoji-count');
        const startButton = document.querySelector('#start');
        const emojisContainer = document.querySelector('#emojis');
        const resetButton = document.querySelector('#reset');

        startButton.addEventListener('click', () => {
            formContainer.classList.add('hidden');
            emojisContainer.innerHTML = '';

            const emojiCount = parseInt(emojiCountInput.value);
            for (let i = 0; i < emojiCount; i++) {
                emojisContainer.innerHTML += '<div class="emoji scissors">‚úÇÔ∏è</div>';
                emojisContainer.innerHTML += '<div class="emoji rock">ü™®</div>';
                emojisContainer.innerHTML += '<div class="emoji paper">üìÑ</div>';
            }

            const emojis = document.querySelectorAll('.emoji');


            function moveEmojis() {
                emojis.forEach(emoji => {
                    if (!emoji.x) emoji.x = Math.random() * window.innerWidth;
                    if (!emoji.y) emoji.y = Math.random() * window.innerHeight;        
                    if (!emoji.vx) emoji.vx = Math.random() * 10 - 5;
                    if (!emoji.vy) emoji.vy = Math.random() * 10 - 5;
                    
                    emoji.x += emoji.vx;
                    emoji.y += emoji.vy;

                    if (emoji.x < 0 || emoji.x > window.innerWidth) emoji.vx = -emoji.vx;
                    if (emoji.y < 0 || emoji.y > window.innerHeight) emoji.vy = -emoji.vy;

                    emoji.style.left = emoji.x + 'px';
                    emoji.style.top = emoji.y + 'px';
                });
            }

            
            function checkCollision(emoji1, emoji2) {
                const rect1 = emoji1.getBoundingClientRect();
                const rect2 = emoji2.getBoundingClientRect();
                return !(rect1.right < rect2.left || 
                         rect1.left > rect2.right || 
                         rect1.bottom < rect2.top || 
                         rect1.top > rect2.bottom);
            }

            function updateState(emoji1, emoji2) {
                if (emoji1.textContent === '‚úÇÔ∏è' && emoji2.textContent === 'üìÑ') {
                    emoji2.textContent = '‚úÇÔ∏è';
                } else if (emoji1.textContent === 'üìÑ' && emoji2.textContent === '‚úÇÔ∏è') {
                    emoji1.textContent = '‚úÇÔ∏è';
                } else if (emoji1.textContent === 'ü™®' && emoji2.textContent === '‚úÇÔ∏è') {
                    emoji2.textContent = 'ü™®';
                } else if (emoji1.textContent === '‚úÇÔ∏è' && emoji2.textContent === 'ü™®') {
                    emoji1.textContent = 'ü™®';
                } else if (emoji1.textContent === 'üìÑ' && emoji2.textContent === 'ü™®') {
                    emoji2.textContent = 'üìÑ';
                } else if (emoji1.textContent === 'ü™®' && emoji2.textContent === 'üìÑ') {
                    emoji1.textContent = 'üìÑ';
                }
            }           
            
            function resetEmojis() {
                emojis.forEach(emoji => {
                    delete emoji.x;
                    delete emoji.y;
                    delete emoji.vx;
                    delete emoji.vy;
                    delete emoji.locked;
                });
            }


           resetButton.addEventListener('click', () => {

                formContainer.classList.remove('hidden');
                emojisContainer.innerHTML = '';
                clearInterval(interval);
            });

            setInterval(() => {
                moveEmojis();
                for (let i = 0; i < emojis.length; i++) {
                    for (let j = i + 1; j < emojis.length; j++) {
                        if (checkCollision(emojis[i], emojis[j])) {
                            updateState(emojis[i], emojis[j]);
                        }
                    }
                }
            }, 100);
        });
        
        function handleResize() {
            const emojis = document.querySelectorAll('.emoji');
            emojis.forEach(emoji => {
                if (emoji.x > window.innerWidth) emoji.x = window.innerWidth;
                if (emoji.y > window.innerHeight) emoji.y = window.innerHeight;
            });
        }

        window.addEventListener('resize', handleResize);
    </script>
</body>
</html>
